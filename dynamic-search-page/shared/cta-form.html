<!-- CTA Form Component - Complete -->
<section class="cta-section" id="contact">
  <!-- Main CTA Button -->
  <div class="cta-container">
    <h2>Ready to Find Your Dream Home?</h2>
    <p>Connect with a local real estate expert today</p>
    <button id="cta-button" class="cta-button">
      <i class="fas fa-home"></i> Get Personalized Help
    </button>
  </div>

  <!-- Contact Form Modal -->
  <div id="cta-modal" class="cta-modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>Contact Our Team</h2>
      
      <form id="contact-form" class="contact-form">
        <div class="form-group">
          <label for="cta-name">Full Name*</label>
          <input type="text" id="cta-name" name="name" required>
        </div>
        
        <div class="form-group">
          <label for="cta-email">Email*</label>
          <input type="email" id="cta-email" name="email" required>
        </div>
        
        <div class="form-group">
          <label for="cta-phone">Phone</label>
          <input type="tel" id="cta-phone" name="phone">
        </div>
        
        <div class="form-group">
          <label>I'm interested in:</label>
          <div class="checkbox-group">
            <label><input type="checkbox" name="interest[]" value="buying"> Buying</label>
            <label><input type="checkbox" name="interest[]" value="selling"> Selling</label>
            <label><input type="checkbox" name="interest[]" value="investing"> Investing</label>
          </div>
        </div>
        
        <button type="submit" class="submit-button">
          <span class="button-text">Submit Request</span>
          <span class="spinner"><i class="fas fa-spinner fa-spin"></i></span>
        </button>
      </form>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div id="form-spinner" class="form-spinner">
    <div class="spinner-animation"></div>
    <div class="spinner-text">Processing...</div>
  </div>

  <!-- Success Message -->
  <div id="success-message" class="success-message">
    <div class="success-content">
      <i class="fas fa-check-circle success-icon"></i>
      <h3>Thank You!</h3>
      <p>We'll contact you within 24 hours.</p>
      <button id="close-success" class="cta-button">Close</button>
    </div>
  </div>
</section>

<style>
  /* CTA Section Styles */
  .cta-section {
    padding: 3rem 0;
    background: linear-gradient(135deg, var(--primary, #2a5b84), var(--primary-dark, #1a3a5a));
    color: white;
    text-align: center;
    position: relative;
  }
  
  .cta-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .cta-section h2 {
    font-size: 2rem;
    margin-bottom: 1rem;
  }
  
  .cta-section p {
    font-size: 1.1rem;
    opacity: 0.9;
    margin-bottom: 2rem;
  }
  
  .cta-button {
    background: var(--accent, #5ef2c2);
    color: var(--dark, #1e1e2f);
    border: none;
    padding: 12px 24px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }
  
  .cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }
  
  /* Modal Styles */
  .cta-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }
  
  .modal-content {
    background: white;
    width: 100%;
    max-width: 500px;
    border-radius: 8px;
    padding: 2rem;
    position: relative;
    color: var(--dark, #333);
    animation: modalFadeIn 0.3s;
  }
  
  @keyframes modalFadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .close-modal {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--dark, #333);
  }
  
  /* Form Styles */
  .contact-form {
    margin-top: 1.5rem;
  }
  
  .form-group {
    margin-bottom: 1.25rem;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
  }
  
  .form-group input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
  }
  
  .checkbox-group {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }
  
  .checkbox-group label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: normal;
    cursor: pointer;
  }
  
  .submit-button {
    width: 100%;
    padding: 1rem;
    background: var(--primary, #2a5b84);
    color: white;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 1rem;
    position: relative;
  }
  
  .submit-button .spinner {
    display: none;
    position: absolute;
    right: 15px;
  }
  
  /* Spinner Styles */
  .form-spinner {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.8);
    z-index: 1001;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  
  .spinner-animation {
    border: 4px solid rgba(0,0,0,0.1);
    border-radius: 50%;
    border-top: 4px solid var(--primary, #2a5b84);
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  /* Success Message */
  .success-message {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 1002;
    align-items: center;
    justify-content: center;
  }
  
  .success-content {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    max-width: 400px;
  }
  
  .success-icon {
    color: var(--success, #4CAF50);
    font-size: 3rem;
    margin-bottom: 1rem;
  }
  
  @media (max-width: 600px) {
    .modal-content {
      margin: 1rem;
      padding: 1.5rem;
    }
    
    .checkbox-group {
      flex-direction: column;
      gap: 0.5rem;
    }
  }
</style>

<script>
  // CTA Form JavaScript
  (function() {
    // DOM Elements
    const ctaButton = document.getElementById('cta-button');
    const modal = document.getElementById('cta-modal');
    const closeModal = document.querySelector('.close-modal');
    const form = document.getElementById('contact-form');
    const spinner = document.getElementById('form-spinner');
    const successMessage = document.getElementById('success-message');
    const closeSuccess = document.getElementById('close-success');
    
    // Open Modal
    if (ctaButton) {
      ctaButton.addEventListener('click', () => {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      });
    }
    
    // Close Modal
    if (closeModal) {
      closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      });
    }
    
    // Close when clicking outside modal
    window.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    });
    
    // Form Submission
    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Show spinner
        if (spinner) spinner.style.display = 'flex';
        
        // Disable submit button
        const submitButton = form.querySelector('button[type="submit"]');
        if (submitButton) {
          submitButton.disabled = true;
          submitButton.querySelector('.button-text').textContent = 'Processing...';
          submitButton.querySelector('.spinner').style.display = 'inline-block';
        }
        
        // Simulate form submission (replace with actual API call)
        try {
          // Example: Send data to server
          // const formData = new FormData(form);
          // const response = await fetch('/submit-form', {
          //   method: 'POST',
          //   body: formData
          // });
          
          // Simulate network delay
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          // On success
          modal.style.display = 'none';
          if (successMessage) successMessage.style.display = 'flex';
          
          // Reset form
          form.reset();
        } catch (error) {
          console.error('Form submission error:', error);
          alert('There was an error submitting your form. Please try again.');
        } finally {
          // Hide spinner
          if (spinner) spinner.style.display = 'none';
          
          // Reset submit button
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.querySelector('.button-text').textContent = 'Submit Request';
            submitButton.querySelector('.spinner').style.display = 'none';
          }
        }
      });
    }
    
    // Close success message
    if (closeSuccess) {
      closeSuccess.addEventListener('click', () => {
        successMessage.style.display = 'none';
        document.body.style.overflow = 'auto';
      });
    }
  })();
</script>
